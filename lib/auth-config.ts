/**
 * Authentication and Client Configuration
 * 
 * Defines user roles and client-to-battery mappings
 */

export type UserRole = "super_admin" | "client";

export interface User {
  id: string;
  username: string;
  password: string;
  role: UserRole;
  name: string;
  clientId?: string; // Only for clients
}

/**
 * Client-to-Battery Mapping
 * Each client has access to a specific set of device IDs
 */
export const CLIENT_BATTERY_MAPPING: Record<string, string[]> = {
  client1: [
    "V18000868019069499136",
    "V18000866082076307744",
    "V18000862287076737568",
    "V12000868210069332233",
    "V12000868019069499136",
    "V12000866082076307330",
    "V12000863877079070642",
    "V12000863877079040439",
    "V12000861919082615054",
    "V12000861919082574202",
    "V12000861919082574186",
    "V12000861919082556357",
    "V12000861919082556191",
    "V12000861919082542498",
    "V12000861919082542241",
    "V12000861919082518761",
    "000005868019069499136",
    "000005866082076307744",
    "000005866082076307330",
    "000005864524075873400",
    "000005864524075869770",
    "000005861919085777513",
    "000005861919085777497",
    "000005861919085777448",
    "000005861919085777422",
    "000005861919085773918",
    "000005861919085773678",
    "000005861919085772662",
    "000005861919085772597",
    "000005861919085764826",
    "000005861919085764800",
    "000005861919085764750",
    "000005861919085764289",
    "000005861919085764271",
    "000005861919085764263",
    "000005861919085764222",
    "000005861919085764206",
    "000005861919085763661",
    "000005861919085763422",
    "000005861919085763323",
    "000005861919085763034",
    "000005861919085763026",
    "000005861919085763000",
    "000005861919085762960",
    "000005861919085762952",
    "000005861919085762945",
    "000005861919085762895",
    "000005861919085762861",
    "000005861919085762853",
    "000005861919085762804",
    "000005861919085762762",
    "000005861919085762580",
    "000005861919085762481",
    "000005861919085762416",
    "000005861919085762390",
    "000005861919085762275",
    "000005861919085762234",
    "000005861919085762218",
    "000005861919085761954",
    "000005861919085761897",
    "000005861919085761160",
    "000005861919085760907",
    "000005861919085760782",
    "000005861919085760774",
    "000005861919085760766",
    "000005861919085760758",
    "000005861919085760717",
    "000005861919085760287",
    "000005861919085760238",
    "000005861919085760212",
    "000005861919085760014",
    "000005861919085747359",
    "000005861919085747334",
    "000005861919085747292",
    "000005861919085747268",
    "000005861919085747078",
    "000005861919085747045",
    "000005861919085746724",
    "000005861919085746641",
    "000005861919085746518",
    "000005861919085746211",
    "000005861919085746070",
    "000005861919085746062",
    "000005861919085746047",
    "000005861919085746021",
    "000005861919085745924",
    "000005861919085745841",
    "000005861919085744695",
    "000005861919085744521",
    "000005861919085744430",
    "000005861919085743929",
    "000005861919085743887",
    "000005861919085743879",
    "000005861919085743853",
    "000005861919085743838",
    "000005861919085743648",
    "000005861919085743242",
    "000005861919085743234",
    "000005861919085742871",
    "000005861919085741014",
    "000005861919085740933",
    "000005861919085740891",
    "000005861919085740768",
    "000005861919085740727",
    "000005861919085740032",
    "000005861919085739687",
    "000005861919085739554",
    "000005861919085724846",
    "000005861919085724671",
    "000005861919085723467",
    "000005861919085723319",
    "000005861919085723244",
    "000005861919085723152",
    "000005861919085723079",
    "000005861919085722972",
    "000005861919085722873",
    "000005861919085722774",
    "000005861919085722295",
    "000005861919085722238",
    "000005861919085722196",
    "000005861919085722055",
    "000005861919085722022",
    "000005861919085721909",
    "000005861919085721875",
    "000005861919085721867",
    "000005861919085721826",
    "000005861919085721800",
    "000005861919085721784",
    "000005861919085721768",
    "000005861919085721743",
    "000005861919085721578",
    "000005861919085721552",
    "000005861919085721495",
    "000005861919085721453",
    "000005861919085721248",
    "000005861919085721198",
    "000005861919085720885",
    "000005861919085720828",
    "000005861919085720679",
    "000005861919085719341",
    "000005861919085717642",
    "000005861919085717246",
    "000005861919085717188",
    "000005861919085716966",
    "000005861919085716859",
    "000005861919085716768",
    "000005861919085716750",
    "000005861919085716735",
    "000005861919085716719",
    "000005861919085716602",
    "000005861919085716503",
  ],
  client2: [
    "000005861919085713799",
    "000005861919085713765",
    "000005861919085713740",
    "000005861919085713583",
    "000005861919085713542",
    "000005861919085713385",
    "000005861919085713120",
    "000005861919085713104",
    "000005861919085713054",
    "000005861919085712908",
    "000005861919085712783",
    "000005861919085711983",
    "000005861919085711751",
    "000005861919085711009",
    "000005861919085710985",
    "000005861919085710910",
    "000005861919085710894",
    "000005861919085685583",
    "000005861919085685443",
    "000005861919085685179",
    "000005861919085685153",
    "000005861919085685146",
    "000005861919085684982",
    "000005861919085684669",
    "000005861919085669090",
    "000005861919085668902",
    "000005861919085668092",
    "000005861919085651445",
    "000005861919085651239",
    "000005861919085651213",
    "000005861919085649670",
    "000005861919085648607",
    "000005861919085647740",
    "000005861919085647336",
    "000005861919085646783",
    "000005861919085646403",
    "000005861919085646361",
    "000005861919085645579",
    "000005861919085645124",
    "000005861919085645082",
    "000005861919085645009",
    "000005861919085630241",
    "000005861919085629656",
    "000005861919085615937",
    "000005861919085615572",
    "000005861919085614922",
    "000005861919085585130",
    "000005861919085585072",
    "000005861919085584497",
    "000005861919085584414",
    "000005861919085584166",
    "000005861919085584141",
    "000005861919085584042",
    "000005861919085584026",
    "000005861919085583937",
    "000005861919085583895",
    "000005861919085583432",
    "000005861919085583317",
    "000005861919085583259",
    "000005861919085583036",
    "000005861919085582392",
    "000005861919085582368",
    "000005861919085582269",
    "000005861919085582251",
    "000005861919085582178",
    "000005861919085582152",
    "000005861919085582137",
    "000005861919085581428",
    "000005861919085581261",
    "000005861919085581220",
    "000005861919085581154",
    "000005861919085580644",
    "000005861919085580628",
    "000005861919085580594",
    "000005861919085580578",
    "000005861919085580545",
    "000005861919085580495",
    "000005861919085580024",
    "000005861919085579752",
    "000005861919085579737",
    "000005861919085579653",
    "000005861919085579315",
    "000005861919085579299",
    "000005861919085579257",
    "000005861919085579190",
    "000005861919085579133",
    "000005861919085578887",
    "000005861919085578879",
    "000005861919085578770",
    "000005861919085578754",
    "000005861919085578325",
    "000005861919085578283",
    "000005861919085576337",
    "000005861919085576212",
    "000005861919085576055",
    "000005861919085575990",
    "000005861919085575933",
    "000005861919085575875",
    "000005861919085575834",
    "000005861919085575792",
    "000005861919085575750",
    "000005861919085575479",
    "000005861919085575347",
    "000005861919085575289",
    "000005861919085575032",
    "000005861919085574977",
    "000005861919085574944",
    "000005861919085574886",
    "000005861919085574860",
    "000005861919085574829",
    "000005861919085574803",
    "000005861919085574795",
    "000005861919085574787",
    "000005861919085574753",
    "000005861919085574720",
    "000005861919085574688",
    "000005861919085574654",
    "000005861919085574589",
    "000005861919085574472",
    "000005861919085573490",
    "000005861919085573441",
    "000005861919085573433",
    "000005861919085573391",
    "000005861919085573342",
    "000005861919085573334",
    "000005861919085573300",
    "000005861919085573284",
    "000005861919085572419",
    "000005861919085572344",
  ],
  client3: [
    "000005861919085471596",
    "000005861919085471471",
    "000005861919085471141",
    "000005861919085471083",
    "000005861919085471067",
    "000005861919085470572",
    "000005861919085470192",
    "000005861919085470150",
    "000005861919085470143",
    "000005861919085470093",
    "000005861919085470036",
    "000005861919085469459",
    "000005861919085441250",
    "000005861919085440567",
    "000005861919085440153",
    "000005861919085439924",
    "000005861919085439809",
    "000005861919085439379",
    "000005861919085439338",
    "000005861919085439288",
    "000005861919085396157",
    "000005861919085396090",
    "000005861919085396074",
    "000005861919085395415",
    "000005861919085395290",
    "000005861919085393253",
    "000005861919085393220",
    "000005861919085393212",
    "000005861919085386216",
    "000005861919085386042",
    "000005861919085384013",
    "000005861919085383841",
    "000005861919085383452",
    "000005861919085383304",
    "000005861919085383015",
    "000005861409078843928",
  ],
  client4: [
    // Client 4 will see batteries that are not assigned to other clients
    // In production, assign specific device IDs here
    // For now, client4 will have no assigned batteries (empty array)
  ],
};

/**
 * User credentials configuration
 */
export const USERS: User[] = [
  {
    id: "1",
    username: "admin",
    password: "admin123",
    role: "super_admin",
    name: "Super Admin",
  },
  {
    id: "2",
    username: "client1",
    password: "client1",
    role: "client",
    name: "Client 1",
    clientId: "client1",
  },
  {
    id: "3",
    username: "client2",
    password: "client2",
    role: "client",
    name: "Client 2",
    clientId: "client2",
  },
  {
    id: "4",
    username: "client3",
    password: "client3",
    role: "client",
    name: "Client 3",
    clientId: "client3",
  },
  {
    id: "5",
    username: "client4",
    password: "client4",
    role: "client",
    name: "Client 4",
    clientId: "client4",
  },
];

/**
 * Get allowed device IDs for a user
 * Super admin gets all devices (null = no filter)
 * Clients get their assigned devices
 */
export function getAllowedDeviceIds(userRole: UserRole, clientId?: string): string[] | null {
  if (userRole === "super_admin") {
    return null; // null means all devices
  }
  
  if (clientId && CLIENT_BATTERY_MAPPING[clientId]) {
    return CLIENT_BATTERY_MAPPING[clientId];
  }
  
  return []; // Empty array means no access
}

/**
 * Check if a device ID is allowed for a user
 */
export function isDeviceAllowed(deviceId: string, userRole: UserRole, clientId?: string): boolean {
  const allowedIds = getAllowedDeviceIds(userRole, clientId);
  
  if (allowedIds === null) {
    return true; // Super admin has access to all
  }
  
  return allowedIds.includes(deviceId);
}

